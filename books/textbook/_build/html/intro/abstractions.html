
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>4. Operating System Abstractions &#8212; Introduction to Operating Systems</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=87e54e7c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="application/vnd.jupyter.widget-state+json">{"state": {"0f430c622d744aa5b031eec05fea7d6d": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "2794310256c44986ab7b6c5e234245d4": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_3616dadfc3d44952ba43d5a0117da532", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ./testfork\n\r: command not found\r\nbash: /home/trantor/.bashrc: line 6: syntax error near unexpected token `$'in\\r''\r\nbash: /home/trantor/.bashrc: line 6: `case $- in\r'\r\nhello, from parent with pid 11815, pid of child is 11834\r\n"}], "tabbable": null, "tooltip": null}}, "345d4db01e934548916e734fc8bf16a1": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "348bdd52fa334b598eccd5406a47d725": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_d470c25b14ae4722bae58e05c61fe13a", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ls -l /proc/$$/fd/{0..2}\r\nlrwx------ 1 trantor trantor 64 Jul 18 12:29 /proc/11724/fd/0 -> /dev/pts/4\r\nlrwx------ 1 trantor trantor 64 Jul 18 12:29 /proc/11724/fd/1 -> /dev/pts/4\r\nlrwx------ 1 trantor trantor 64 Jul 18 12:29 /proc/11724/fd/2 -> /dev/pts/4\r\ntrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "3616dadfc3d44952ba43d5a0117da532": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "3e438ff8d9164d8ebb89ae28519565d3": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "436abc6973754814a1fd9a6e39714f7d": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "488a169c942e4385b4aef223ebe18672": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "49103806d1f349828be456f26a7ed874": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "1in", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "4a2c1789e8f44cb69d8429d6956084dc": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_345d4db01e934548916e734fc8bf16a1", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ bash\r\n\r: command not found\r\nbash: /home/trantor/.bashrc: line 6: syntax error near unexpected token `$'in\\r''\r\nbash: /home/trantor/.bashrc: line 6: `case $- in\r'\r\n\u001b[?2004htrantor@P7xxTM1:~/lec3$ bash\r\n\u001b[?2004l\r\r: command not found\r\nbash: /home/trantor/.bashrc: line 6: syntax error near unexpected token `$'in\\r''\r\nbash: /home/trantor/.bashrc: line 6: `case $- in\r'\r\n\u001b[?2004htrantor@P7xxTM1:~/lec3$ bash\r\n\u001b[?2004l\r\r: command not found\r\nbash: /home/trantor/.bashrc: line 6: syntax error near unexpected token `$'in\\r''\r\nbash: /home/trantor/.bashrc: line 6: `case $- in\r'\r\n\u001b[?2004htrantor@P7xxTM1:~/lec3$ ps -jH\r\n\u001b[?2004l\r  PID  PGID   SID TTY          TIME CMD\r\n11724 11724 11724 pts/4    00:00:00 bash\r\n11763 11763 11724 pts/4    00:00:00   bash\r\n11772 11772 11724 pts/4    00:00:00     bash\r\n11781 11781 11724 pts/4    00:00:00       bash\r\n11790 11790 11724 pts/4    00:00:00         ps\r\n\u001b[?2004htrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "57f2cf84204249af9253e849c29d1169": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_7eea940460244509b8e76cb30a8dbc34", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ echo \"Hello class\" > /tmp/reshello\r\ntrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "57faad20691a4f6b80e186544f8dacaa": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_c56dde7a9651417cb1c22d8420087ecc", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ls /usr/bin/ | grep perl | wc -l\r\n10\r\ntrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "59aa976669b24c68a8a9480f62d76f5a": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_ff0220ffa24e4d8ba72e0a45c2d7dc74", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "\n\r: command not found\r\nbash: /home/trantor/.bashrc: line 6: syntax error near unexpected token `$'in\\r''\r\nbash: /home/trantor/.bashrc: line 6: `case $- in\r'\r\nmake[1]: Entering directory '/home/trantor/lec3'\r\ngcc -Werror -Wall -std=gnu99 -O0 -g  -I.    testfork.c   -o testfork\r\nmake[1]: Leaving directory '/home/trantor/lec3'\r\n"}], "tabbable": null, "tooltip": null}}, "5c2d7852c86a483ea588d301f79f7848": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "6107b0c4241d488dbba778189f196b76": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "1in", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "61d54b09161e4ee192ef1798da7047f3": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_0f430c622d744aa5b031eec05fea7d6d", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ls \n\r: command not found\r\nbash: /home/trantor/.bashrc: line 6: syntax error near unexpected token `$'in\\r''\r\nbash: /home/trantor/.bashrc: line 6: `case $- in\r'\r\nOS-L01.css\t    intro.ipynb        structure.ipynb\t    tools-make.ipynb\r\nOS-L01.ipynb\t    other.ipynb        tools-c.ipynb\t    tools-shell.ipynb\r\nabstractions.ipynb  peter-other.ipynb  tools-editors.ipynb  tools-testing.ipynb\r\ncommon.ipynb\t    pref.ipynb\t       tools-gdb.ipynb\t    tools.ipynb\r\nhistory.ipynb\t    purpose.ipynb      tools-git.ipynb\r\n$ "}], "tabbable": null, "tooltip": null}}, "62e24525c99e4f8b80e77a024dfb7e5b": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "742ddbadaa2f4533b05c622dbcca3754": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_436abc6973754814a1fd9a6e39714f7d", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ls /usr/bin/ | grep perl | wc -l\r\n\u001b[?2004l\r10\r\n\u001b[?2004htrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "7840dd3e80644f3dad5283ad1603db99": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_488a169c942e4385b4aef223ebe18672", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ file /dev/pts/4\r\n/dev/pts/4: character special (136/4)\r\ntrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "7c55d9ac0b7c4df49285d79302339fad": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_c3d2e5fd1b444256b9a365774227db7c", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ ./testfork\r\n\u001b[?2004l\rhello, from parent with pid 11842, pid of child is 11843\r\nhello, I am child with pid 11843, my parent is 11842\r\n\u001b[?2004htrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "7eea940460244509b8e76cb30a8dbc34": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "7fa1f3df51f041b8b894ee94b87f7986": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "88656cf25e0c42ce97cbaf6ee7f2057d": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "90b9006d4b354c71bb60e2f97905a8ea": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_88656cf25e0c42ce97cbaf6ee7f2057d", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ echo \"hello class\" > /dev/pts/4\r\nhello class\r\ntrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "932d20cb2f934e8e87c871901a0ed7ca": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_7fa1f3df51f041b8b894ee94b87f7986", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ make > RES &\r\n\u001b[?2004l\r[1] 11861\r\n\u001b[?2004htrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "9470303b0a9448f5818a2158a872d34c": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "1in", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "98b2817397f847ea94283c41a9bc6abc": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_5c2d7852c86a483ea588d301f79f7848", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ echo $PATH\r\n\u001b[?2004l\r/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/usr/lib/wsl/lib:/mnt/c/Users/trantor/.vscode-server/bin/0ee08df0cf4527e40edc9aa28f4b5bd38bbff2b2/bin/remote-cli:/mnt/c/Users/trantor/anaconda3:/mnt/c/Users/trantor/anaconda3/Library/mingw-w64/bin:/mnt/c/Users/trantor/anaconda3/Library/usr/bin:/mnt/c/Users/trantor/anaconda3/Library/bin:/mnt/c/Users/trantor/anaconda3/Scripts:/mnt/c/Users/trantor/anaconda3/bin:/mnt/c/Users/trantor/anaconda3/condabin:/mnt/c/Program Files (x86)/VMware/VMware Workstation/bin:/mnt/c/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v12.1/bin:/mnt/c/Program Files/NVIDIA GPU Computing Toolkit/CUDA/v12.1/libnvvp:/mnt/c/Program Files/Microsoft/jdk-11.0.16.101-hotspot/bin:/mnt/c/Windows/system32:/mnt/c/Windows:/mnt/c/Windows/System32/Wbem:/mnt/c/Windows/System32/WindowsPowerShell/v1.0:/mnt/c/Windows/System32/OpenSSH:/mnt/c/Program Files/NVIDIA Corporation/NVIDIA NvDLISR:/mnt/c/Program Files (x86)/NVIDIA Corporation/PhysX/Common:/mnt/c/Program Files/dotnet:/mnt/c/Program Files/Microsoft SQL Server/150/Tools/Binn:/mnt/c/Program Files/Microsoft SQL Server/Client SDK/ODBC/170/Tools/Binn:/mnt/c/Program Files (x86)/Windows Kits/10/Windows Performance Toolkit:/mnt/c/Program Files/Git/cmd:/mnt/c/Program Files/Polyspace/R2024a/polyspace/bin:/mnt/c/Program Files/MATLAB/MATLAB Runtime/R2024a/runtime/win64:/mnt/c/Program Files/MATLAB/R2024a/runtime/win64:/mnt/c/Program Files/MATLAB/R2024a/bin:/mnt/c/Program Files/Microsoft VS Code/bin:/mnt/c/Program Files (x86)/Common Files/Acronis/SnapAPI:/mnt/c/Program Files (x86)/Common Files/Acronis/VirtualFile:/mnt/c/Program Files (x86)/Common Files/Acronis/VirtualFile64:/mnt/c/Program Files (x86)/Common Files/Acronis/FileProtector:/mnt/c/Program Files (x86)/Common Files/Acronis/FileProtector64:/mnt/c/Program Files/Calibre2:/mnt/c/Program Files (x86)/IncrediBuild:/mnt/c/Program Files (x86)/Microsoft SQL Server/150/Tools/Binn:/mnt/c/Program Files/Microsoft SQL Server/150/DTS/Binn:/mnt/c/Program Files (x86)/Windows Kits/8.1/Windows Performance Toolkit:/mnt/c/Program Files/NVIDIA Corporation/Nsight Compute 2023.1.1:/mnt/c/Program Files/Go/bin:/mnt/c/Program Files/gs/gs10.02.1/bin:/mnt/c/Program Files/MATLAB/R2023a/bin:/mnt/c/Program Files/Docker/Docker/resources/bin:/mnt/c/Windows/system32/config/systemprofile/AppData/Local/Microsoft/WindowsApps:/mnt/c/Users/trantor/anaconda3:/mnt/c/Users/trantor/anaconda3/Library/mingw-w64/bin:/mnt/c/Users/trantor/anaconda3/Library/usr/bin:/mnt/c/Users/trantor/anaconda3/Library/bin:/mnt/c/Users/trantor/anaconda3/Scripts:/mnt/f/Protable/Txt/mupdf:/mnt/f/Protable/Txt/pandoc:/mnt/f/Protable/Txt/pandoc/lua-filters:/mnt/f/Protable/Download/aria2:/mnt/f/Protable/Download/wget:/mnt/f/Protable/Code/cygwin64:/mnt/f/Protable/Code/java/bin:/mnt/f/Protable/Code/adb:/mnt/f/Protable/Code/grep:/mnt/f/Protable/Code/bat:/mnt/f/Protable/Code/cpp/cmake/bin:/mnt/c/Protable/Code/cpp/compiler:/mnt/f/Protable/Code/cpp/llvm-mingw/bin:/mnt/c/Protable/Code/bin:/mnt/c/Protable/Code/bin/nssm:/mnt/f/Protable/Code/pyenv/bin:/mnt/f/Protable/Code/format/markdown:/mnt/f/Protable/Serial/putty:/mnt/f/Protable/Media/ffmpeg/bin:/mnt/c/Protable/Media/ncmdump:/mnt/c/Protable/Ruanmei:/mnt/c/Protable/Code/bin/restic:/mnt/c/Protable/Code/bin/llama.cpp:/mnt/c/Program Files/WinRAR:/mnt/c/Program Files/gsudo/2.4.0:/mnt/c/Program Files/DAUM/PotPlayer:/mnt/c/Program Files/WinRAR:/mnt/c/Program Files (x86)/Vim/vim90:/mnt/c/Program Files (x86)/Adobe/Acrobat DC/Acrobat:/mnt/c/Program Files (x86)/VMware/VMware Workstation:/mnt/c/Program Files/7-Zip:/mnt/c/ProgramData/chocolatey/bin:/mnt/c/Users/trantor/AppData/Local/Microsoft/WindowsApps:/mnt/c/Users/trantor/.dotnet/tools:/mnt/c/Program Files/LLVM/bin:/mnt/c/Users/trantor/.dotnet/tools:/mnt/c/Users/trantor/go/bin:/mnt/c/Program Files/gs/gs10.02.1/bin:/mnt/c/Program Files/Git/usr/bin:/mnt/c/Users/trantor/AppData/Local/Programs/Microsoft VS Code/bin:/mnt/c/Protable/Bat/python/caj2pdf:/mnt/c/Protable/Bat/powershell:/mnt/c/Users/trantor/AppData/Local/Programs/Ollama:/snap/bin\r\n\u001b[?2004htrantor@P7xxTM1:~/lec3$ type cat\r\n\u001b[?2004l\rcat is /usr/bin/cat\r\n\u001b[?2004htrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "add5f27cf4304587aea22799ac31e98b": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_9470303b0a9448f5818a2158a872d34c", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ man 2 write\r\n\u001b[4mwrite\u001b[24m(2)                      System Calls Manual                     \u001b[4mwrite\u001b[24m(2)\r\n\r\n\u001b[1mNAME\u001b[0m\r\n       write - write to a file descriptor\r\n\r\n\u001b[1mLIBRARY\u001b[0m\r\n       Standard C library (\u001b[4mlibc\u001b[24m, \u001b[4m-lc\u001b[24m)\r\n\r\n\u001b[1mSYNOPSIS\u001b[0m\r\n       \u001b[1m#include <unistd.h>\u001b[0m\r\n\r\n       \u001b[1mssize_t write(int \u001b[4m\u001b[22mfd\u001b[24m\u001b[1m, const void \u001b[4m\u001b[22mbuf\u001b[24m\u001b[1m[.\u001b[4m\u001b[22mcount\u001b[24m\u001b[1m], size_t \u001b[4m\u001b[22mcount\u001b[24m\u001b[1m);\u001b[0m\r\n\r\n\u001b[1mDESCRIPTION\u001b[0m\r\n       \u001b[1mwrite\u001b[22m() writes up to \u001b[4mcount\u001b[24m bytes from the buffer starting at \u001b[4mbuf\u001b[24m to the\r\n       file referred to by the file descriptor \u001b[4mfd\u001b[24m.\r\n\r\n       The  number  of  bytes  written may be less than \u001b[4mcount\u001b[24m if, for example,\r\n       there is insufficient space on the underlying physical medium,  or  the\r\n       \u001b[1mRLIMIT_FSIZE  \u001b[22mresource  limit is encountered (see \u001b[1msetrlimit\u001b[22m(2)), or the\r\n       call was interrupted by a signal handler after having written less than\r\n       \u001b[4mcount\u001b[24m bytes.  (See also \u001b[1mpipe\u001b[22m(7).)\r\n\r\n       For a seekable file (i.e., one to which \u001b[1mlseek\u001b[22m(2) may  be  applied,  for\r\n       example,  a  regular  file) writing takes place at the file offset, and\r\n       the file offset is incremented by the number of bytes actually written.\r\n       If the file was \u001b[1mopen\u001b[22m(2)ed with \u001b[1mO_APPEND\u001b[22m, the file offset is  first  set\r\n       to the end of the file before writing.  The adjustment of the file off\u2010\r\n       set and the write operation are performed as an atomic step.\r\n\r\n       POSIX  requires  that  a  \u001b[1mread\u001b[22m(2)  that  can be proved to occur after a\r\n       \u001b[1mwrite\u001b[22m() has returned will return the  new  data.   Note  that  not  all\r\n       filesystems are POSIX conforming.\r\n\r\n       According to POSIX.1, if \u001b[4mcount\u001b[24m is greater than \u001b[1mSSIZE_MAX\u001b[22m, the result is\r\n       implementation-defined; see NOTES for the upper limit on Linux.\r\n\r\n\u001b[1mRETURN VALUE\u001b[0m\r\n       On  success,  the number of bytes written is returned.  On error, -1 is\r\n       returned, and \u001b[4merrno\u001b[24m is set to indicate the error.\r\n\r\n       Note that a successful \u001b[1mwrite\u001b[22m() may transfer  fewer  than  \u001b[4mcount\u001b[24m  bytes.\r\n       Such partial writes can occur for various reasons; for example, because\r\n       there was insufficient space on the disk device to write all of the re\u2010\r\n       quested bytes, or because a blocked \u001b[1mwrite\u001b[22m() to a socket, pipe, or simi\u2010\r\n       lar  was interrupted by a signal handler after it had transferred some,\r\n       but before it had transferred all of the requested bytes.  In the event\r\n       of a partial write, the caller can make another \u001b[1mwrite\u001b[22m() call to  trans\u2010\r\n       fer the remaining bytes.  The subsequent call will either transfer fur\u2010\r\n       ther bytes or may result in an error (e.g., if the disk is now full).\r\n\r\n       If  \u001b[4mcount\u001b[24m is zero and \u001b[4mfd\u001b[24m refers to a regular file, then \u001b[1mwrite\u001b[22m() may re\u2010\r\n       turn a failure status if one of the errors below is  detected.   If  no\r\n       errors are detected, or error detection is not performed, 0 is returned\r\n       without  causing any other effect.  If \u001b[4mcount\u001b[24m is zero and \u001b[4mfd\u001b[24m refers to a\r\n       file other than a regular file, the results are not specified.\r\n\r\n\u001b[1mERRORS\u001b[0m\r\n       \u001b[1mEAGAIN \u001b[22mThe file descriptor \u001b[4mfd\u001b[24m refers to a file other than a socket  and\r\n              has  been  marked  nonblocking (\u001b[1mO_NONBLOCK\u001b[22m), and the write would\r\n              block.  See \u001b[1mopen\u001b[22m(2) for further details on the \u001b[1mO_NONBLOCK \u001b[22mflag.\r\n\r\n       \u001b[1mEAGAIN \u001b[22mor \u001b[1mEWOULDBLOCK\u001b[0m\r\n              The file descriptor \u001b[4mfd\u001b[24m refers to a socket and  has  been  marked\r\n              nonblocking   (\u001b[1mO_NONBLOCK\u001b[22m),   and   the   write   would   block.\r\n              POSIX.1-2001 allows either error to be returned for  this  case,\r\n              and  does not require these constants to have the same value, so\r\n              a portable application should check for both possibilities.\r\n\r\n       \u001b[1mEBADF  \u001b[4m\u001b[22mfd\u001b[24m is not a valid file descriptor or is not open for writing.\r\n\r\n       \u001b[1mEDESTADDRREQ\u001b[0m\r\n              \u001b[4mfd\u001b[24m refers to a datagram socket for which a peer address has  not\r\n              been set using \u001b[1mconnect\u001b[22m(2).\r\n\r\n       \u001b[1mEDQUOT \u001b[22mThe user's quota of disk blocks on the filesystem containing the\r\n              file referred to by \u001b[4mfd\u001b[24m has been exhausted.\r\n\r\n       \u001b[1mEFAULT \u001b[4m\u001b[22mbuf\u001b[24m is outside your accessible address space.\r\n\r\n       \u001b[1mEFBIG  \u001b[22mAn attempt was made to write a file that exceeds the implementa\u2010\r\n              tion-defined maximum file size or the process's file size limit,\r\n              or to write at a position past the maximum allowed offset.\r\n\r\n       \u001b[1mEINTR  \u001b[22mThe  call  was interrupted by a signal before any data was writ\u2010\r\n              ten; see \u001b[1msignal\u001b[22m(7).\r\n\r\n       \u001b[1mEINVAL \u001b[4m\u001b[22mfd\u001b[24m is attached to an object which is unsuitable for writing;  or\r\n              the  file  was opened with the \u001b[1mO_DIRECT \u001b[22mflag, and either the ad\u2010\r\n              dress specified in \u001b[4mbuf\u001b[24m, the value specified  in  \u001b[4mcount\u001b[24m,  or  the\r\n              file offset is not suitably aligned.\r\n\r\n       \u001b[1mEIO    \u001b[22mA  low-level I/O error occurred while modifying the inode.  This\r\n              error may relate to the write-back of data written by an earlier\r\n              \u001b[1mwrite\u001b[22m(), which may have been issued to a different file descrip\u2010\r\n              tor on the same file.  Since Linux 4.13, errors from  write-back\r\n              come  with  a  promise  that they \u001b[4mmay\u001b[24m be reported by subsequent.\r\n              \u001b[1mwrite\u001b[22m() requests, and \u001b[4mwill\u001b[24m be reported by a subsequent  \u001b[1mfsync\u001b[22m(2)\r\n              (whether  or not they were also reported by \u001b[1mwrite\u001b[22m()).  An alter\u2010\r\n              nate cause of \u001b[1mEIO \u001b[22mon networked filesystems is when  an  advisory\r\n              lock had been taken out on the file descriptor and this lock has\r\n              been  lost.   See the \u001b[4mLost\u001b[24m \u001b[4mlocks\u001b[24m section of \u001b[1mfcntl\u001b[22m(2) for further\r\n              details.\r\n\r\n       \u001b[1mENOSPC \u001b[22mThe device containing the file referred to by \u001b[4mfd\u001b[24m has no room for\r\n              the data.\r\n\r\n       \u001b[1mEPERM  \u001b[22mThe operation was prevented by a file seal; see \u001b[1mfcntl\u001b[22m(2).\r\n\r\n       \u001b[1mEPIPE  \u001b[4m\u001b[22mfd\u001b[24m is connected to a pipe or socket whose reading end is closed.\r\n              When this happens the writing process will also receive  a  \u001b[1mSIG\u2010\u001b[0m\r\n              \u001b[1mPIPE  \u001b[22msignal.  (Thus, the write return value is seen only if the\r\n              program catches, blocks or ignores this signal.)\r\n\r\n       Other errors may occur, depending on the object connected to \u001b[4mfd\u001b[24m.\r\n\r\n\u001b[1mSTANDARDS\u001b[0m\r\n       POSIX.1-2008.\r\n\r\n\u001b[1mHISTORY\u001b[0m\r\n       SVr4, 4.3BSD, POSIX.1-2001.\r\n\r\n       Under SVr4 a write may be interrupted and return \u001b[1mEINTR  \u001b[22mat  any  point,\r\n       not just before any data is written.\r\n\r\n\u001b[1mNOTES\u001b[0m\r\n       A  successful return from \u001b[1mwrite\u001b[22m() does not make any guarantee that data\r\n       has been committed to disk.  On some  filesystems,  including  NFS,  it\r\n       does  not  even guarantee that space has successfully been reserved for\r\n       the data.  In this case, some errors might be delayed  until  a  future\r\n       \u001b[1mwrite\u001b[22m(),  \u001b[1mfsync\u001b[22m(2),  or  even  \u001b[1mclose\u001b[22m(2).  The only way to be sure is to\r\n       call \u001b[1mfsync\u001b[22m(2) after you are done writing all your data.\r\n\r\n       If a \u001b[1mwrite\u001b[22m() is interrupted by a signal handler before  any  bytes  are\r\n       written, then the call fails with the error \u001b[1mEINTR\u001b[22m; if it is interrupted\r\n       after  at  least  one byte has been written, the call succeeds, and re\u2010\r\n       turns the number of bytes written.\r\n\r\n       On Linux, \u001b[1mwrite\u001b[22m() (and similar system  calls)  will  transfer  at  most\r\n       0x7ffff000  (2,147,479,552)  bytes, returning the number of bytes actu\u2010\r\n       ally transferred.  (This is true on both 32-bit and 64-bit systems.)\r\n\r\n       An error return value while performing \u001b[1mwrite\u001b[22m() using  direct  I/O  does\r\n       not  mean the entire write has failed.  Partial data may be written and\r\n       the data at the file offset on which the \u001b[1mwrite\u001b[22m() was  attempted  should\r\n       be considered inconsistent.\r\n\r\n\u001b[1mBUGS\u001b[0m\r\n       According to POSIX.1-2008/SUSv4 Section XSI 2.9.7 (\"Thread Interactions\r\n       with Regular File Operations\"):\r\n\r\n           All of the following functions shall be atomic with respect to each\r\n           other in the effects specified in POSIX.1-2008 when they operate on\r\n           regular files or symbolic links: ...\r\n\r\n       Among  the  APIs  subsequently  listed  are \u001b[1mwrite\u001b[22m() and \u001b[1mwritev\u001b[22m(2).  And\r\n       among the effects that should be atomic across threads (and  processes)\r\n       are  updates  of the file offset.  However, before Linux 3.14, this was\r\n       not the case: if two processes that share an open file description (see\r\n       \u001b[1mopen\u001b[22m(2)) perform a \u001b[1mwrite\u001b[22m() (or \u001b[1mwritev\u001b[22m(2)) at the same  time,  then  the\r\n       I/O  operations  were not atomic with respect to updating the file off\u2010\r\n       set, with the result  that  the  blocks  of  data  output  by  the  two\r\n       processes might (incorrectly) overlap.  This problem was fixed in Linux\r\n       3.14.\r\n\r\n\u001b[1mSEE ALSO\u001b[0m\r\n       \u001b[1mclose\u001b[22m(2),  \u001b[1mfcntl\u001b[22m(2),  \u001b[1mfsync\u001b[22m(2), \u001b[1mioctl\u001b[22m(2), \u001b[1mlseek\u001b[22m(2), \u001b[1mopen\u001b[22m(2), \u001b[1mpwrite\u001b[22m(2),\r\n       \u001b[1mread\u001b[22m(2), \u001b[1mselect\u001b[22m(2), \u001b[1mwritev\u001b[22m(2), \u001b[1mfwrite\u001b[22m(3)\r\n\r\nLinux man-pages 6.7               2023-10-31                          \u001b[4mwrite\u001b[24m(2)\r\ntrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "bdde6b49f1544bfcae00aee072e5e6cf": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_49103806d1f349828be456f26a7ed874", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ echo \"Hello class\"\r\nHello class\r\ntrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "c3d2e5fd1b444256b9a365774227db7c": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c56dde7a9651417cb1c22d8420087ecc": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "cd9e9fc8729149e0a07725c0869b33b7": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_da426875cb46469cb821f2a8b65a4f14", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ man 3 exec\r\n\u001b[?2004l\r\u001b[4mexec\u001b[24m(3)                    Library Functions Manual                    \u001b[4mexec\u001b[24m(3)\r\n\r\n\u001b[1mNAME\u001b[0m\r\n       execl, execlp, execle, execv, execvp, execvpe - execute a file\r\n\r\n\u001b[1mLIBRARY\u001b[0m\r\n       Standard C library (\u001b[4mlibc\u001b[24m, \u001b[4m-lc\u001b[24m)\r\n\r\n\u001b[1mSYNOPSIS\u001b[0m\r\n       \u001b[1m#include <unistd.h>\u001b[0m\r\n\r\n       \u001b[1mextern char **environ;\u001b[0m\r\n\r\n       \u001b[1mint execl(const char *\u001b[4m\u001b[22mpathname\u001b[24m\u001b[1m, const char *\u001b[4m\u001b[22marg\u001b[24m\u001b[1m, ...\u001b[0m\r\n                       \u001b[1m/*, (char *) NULL */);\u001b[0m\r\n       \u001b[1mint execlp(const char *\u001b[4m\u001b[22mfile\u001b[24m\u001b[1m, const char *\u001b[4m\u001b[22marg\u001b[24m\u001b[1m, ...\u001b[0m\r\n                       \u001b[1m/*, (char *) NULL */);\u001b[0m\r\n       \u001b[1mint execle(const char *\u001b[4m\u001b[22mpathname\u001b[24m\u001b[1m, const char *\u001b[4m\u001b[22marg\u001b[24m\u001b[1m, ...\u001b[0m\r\n                       \u001b[1m/*, (char *) NULL, char *const \u001b[4m\u001b[22menvp\u001b[24m\u001b[1m[] */);\u001b[0m\r\n       \u001b[1mint execv(const char *\u001b[4m\u001b[22mpathname\u001b[24m\u001b[1m, char *const \u001b[4m\u001b[22margv\u001b[24m\u001b[1m[]);\u001b[0m\r\n       \u001b[1mint execvp(const char *\u001b[4m\u001b[22mfile\u001b[24m\u001b[1m, char *const \u001b[4m\u001b[22margv\u001b[24m\u001b[1m[]);\u001b[0m\r\n       \u001b[1mint execvpe(const char *\u001b[4m\u001b[22mfile\u001b[24m\u001b[1m, char *const \u001b[4m\u001b[22margv\u001b[24m\u001b[1m[], char *const \u001b[4m\u001b[22menvp\u001b[24m\u001b[1m[]);\u001b[0m\r\n\r\n   Feature Test Macro Requirements for glibc (see \u001b[1mfeature_test_macros\u001b[22m(7)):\r\n\r\n       \u001b[1mexecvpe\u001b[22m():\r\n           _GNU_SOURCE\r\n\r\n\u001b[1mDESCRIPTION\u001b[0m\r\n       The  \u001b[1mexec\u001b[22m() family of functions replaces the current process image with\r\n       a new process image.  The functions described in this manual  page  are\r\n       layered  on  top  of \u001b[1mexecve\u001b[22m(2).  (See the manual page for \u001b[1mexecve\u001b[22m(2) for\r\n       further details about the replacement of the current process image.)\r\n\r\n       The initial argument for these functions is the name of a file that  is\r\n       to be executed.\r\n\r\n       The  functions can be grouped based on the letters following the \"exec\"\r\n       prefix.\r\n\r\n   \u001b[1ml - execl(), execlp(), execle()\u001b[0m\r\n       The \u001b[4mconst\u001b[24m \u001b[4mchar\u001b[24m \u001b[4m*arg\u001b[24m and subsequent ellipses can be thought of as  \u001b[4marg0\u001b[24m,\r\n       \u001b[4marg1\u001b[24m, ..., \u001b[4margn\u001b[24m.  Together they describe a list of one or more pointers\r\n       to  null-terminated  strings that represent the argument list available\r\n       to the executed program.  The first  argument,  by  convention,  should\r\n       point  to  the  filename  associated with the file being executed.  The\r\n       list of arguments \u001b[4mmust\u001b[24m be terminated by  a  null  pointer,  and,  since\r\n       these are variadic functions, this pointer must be cast \u001b[4m(char\u001b[24m \u001b[4m*)\u001b[24m \u001b[4mNULL\u001b[24m.\r\n\r\n       By  contrast  with the 'l' functions, the 'v' functions (below) specify\r\n       the command-line arguments of the executed program as a vector.\r\n\r\n   \u001b[1mv - execv(), execvp(), execvpe()\u001b[0m\r\n       The \u001b[4mchar\u001b[24m \u001b[4m*const\u001b[24m \u001b[4margv[]\u001b[24m argument is an array of pointers to  null-termi\u2010\r\n       nated  strings  that  represent  the argument list available to the new\r\n       program.  The first argument, by convention, should point to the  file\u2010\r\n       name  associated  with  the file being executed.  The array of pointers\r\n       \u001b[4mmust\u001b[24m be terminated by a null pointer.\r\n\r\n   \u001b[1me - execle(), execvpe()\u001b[0m\r\n       The environment of the new process image is specified via the  argument\r\n       \u001b[4menvp\u001b[24m.   The  \u001b[4menvp\u001b[24m  argument  is an array of pointers to null-terminated\r\n       strings and \u001b[4mmust\u001b[24m be terminated by a null pointer.\r\n\r\n       All other \u001b[1mexec\u001b[22m() functions (which do not include  'e'  in  the  suffix)\r\n       take  the environment for the new process image from the external vari\u2010\r\n       able \u001b[4menviron\u001b[24m in the calling process.\r\n\r\n   \u001b[1mp - execlp(), execvp(), execvpe()\u001b[0m\r\n       These functions duplicate the actions of the shell in searching for  an\r\n       executable  file if the specified filename does not contain a slash (/)\r\n       character.  The file is sought in the colon-separated list of directory\r\n       pathnames specified in the \u001b[1mPATH \u001b[22menvironment variable.  If this variable\r\n       isn't defined, the path list defaults to a list that includes  the  di\u2010\r\n       rectories  returned  by  \u001b[4mconfstr(_CS_PATH)\u001b[24m (which typically returns the\r\n       value \"/bin:/usr/bin\") and possibly also the current working directory;\r\n       see NOTES for further details.\r\n\r\n       \u001b[1mexecvpe\u001b[22m() searches for the program using the value  of  \u001b[1mPATH  \u001b[22mfrom  the\r\n       caller's environment, not from the \u001b[4menvp\u001b[24m argument.\r\n\r\n       If  the specified filename includes a slash character, then \u001b[1mPATH \u001b[22mis ig\u2010\r\n       nored, and the file at the specified pathname is executed.\r\n\r\n       In addition, certain errors are treated specially.\r\n\r\n       If permission is denied for a file (the attempted \u001b[1mexecve\u001b[22m(2) failed with\r\n       the error \u001b[1mEACCES\u001b[22m), these functions will continue searching the rest  of\r\n       the  search path.  If no other file is found, however, they will return\r\n       with \u001b[4merrno\u001b[24m set to \u001b[1mEACCES\u001b[22m.\r\n\r\n       If the header of a  file  isn't  recognized  (the  attempted  \u001b[1mexecve\u001b[22m(2)\r\n       failed  with the error \u001b[1mENOEXEC\u001b[22m), these functions will execute the shell\r\n       (\u001b[4m/bin/sh\u001b[24m) with the path of the file as its first  argument.   (If  this\r\n       attempt fails, no further searching is done.)\r\n\r\n       All  other  \u001b[1mexec\u001b[22m()  functions  (which do not include 'p' in the suffix)\r\n       take as their first argument a (relative  or  absolute)  pathname  that\r\n       identifies the program to be executed.\r\n\r\n\u001b[1mRETURN VALUE\u001b[0m\r\n       The  \u001b[1mexec\u001b[22m() functions return only if an error has occurred.  The return\r\n       value is -1, and \u001b[4merrno\u001b[24m is set to indicate the error.\r\n\r\n\u001b[1mERRORS\u001b[0m\r\n       All of these functions may fail and set \u001b[4merrno\u001b[24m for  any  of  the  errors\r\n       specified for \u001b[1mexecve\u001b[22m(2).\r\n\r\n\u001b[1mATTRIBUTES\u001b[0m\r\n       For  an  explanation  of  the  terms  used in this section, see \u001b[1mattrib\u2010\u001b[0m\r\n       \u001b[1mutes\u001b[22m(7).\r\n       \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n       \u2502 \u001b[1mInterface                             \u001b[22m\u2502 \u001b[1mAttribute     \u001b[22m\u2502 \u001b[1mValue       \u001b[22m\u2502\r\n       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n       \u2502 \u001b[1mexecl\u001b[22m(), \u001b[1mexecle\u001b[22m(), \u001b[1mexecv\u001b[22m()            \u2502 Thread safety \u2502 MT-Safe     \u2502\r\n       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\r\n       \u2502 \u001b[1mexeclp\u001b[22m(), \u001b[1mexecvp\u001b[22m(), \u001b[1mexecvpe\u001b[22m()         \u2502 Thread safety \u2502 MT-Safe env \u2502\r\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n\r\n\u001b[1mVERSIONS\u001b[0m\r\n       The default search path (used when the environment does not contain the\r\n       variable \u001b[1mPATH\u001b[22m) shows some variation across systems.  It  generally  in\u2010\r\n       cludes  \u001b[4m/bin\u001b[24m and \u001b[4m/usr/bin\u001b[24m (in that order) and may also include the cur\u2010\r\n       rent working directory.  On some other systems, the current working  is\r\n       included after \u001b[4m/bin\u001b[24m and \u001b[4m/usr/bin\u001b[24m, as an anti-Trojan-horse measure.  The\r\n       glibc  implementation  long  followed the traditional default where the\r\n       current working directory is included at the start of the search  path.\r\n       However,  some  code  refactoring  during the development of glibc 2.24\r\n       caused the current working directory to be dropped altogether from  the\r\n       default  search  path.   This  accidental behavior change is considered\r\n       mildly beneficial, and won't be reverted.\r\n\r\n       The behavior of \u001b[1mexeclp\u001b[22m() and \u001b[1mexecvp\u001b[22m() when errors occur while  attempt\u2010\r\n       ing to execute the file is historic practice, but has not traditionally\r\n       been  documented  and is not specified by the POSIX standard.  BSD (and\r\n       possibly other systems) do an automatic sleep and retry if  \u001b[1mETXTBSY  \u001b[22mis\r\n       encountered.  Linux treats it as a hard error and returns immediately.\r\n\r\n       Traditionally,  the  functions \u001b[1mexeclp\u001b[22m() and \u001b[1mexecvp\u001b[22m() ignored all errors\r\n       except for the ones described above and \u001b[1mENOMEM \u001b[22mand  \u001b[1mE2BIG\u001b[22m,  upon  which\r\n       they  returned.   They  now return if any error other than the ones de\u2010\r\n       scribed above occurs.\r\n\r\n\u001b[1mSTANDARDS\u001b[0m\r\n       \u001b[1menviron\u001b[0m\r\n       \u001b[1mexecl\u001b[22m()\r\n       \u001b[1mexeclp\u001b[22m()\r\n       \u001b[1mexecle\u001b[22m()\r\n       \u001b[1mexecv\u001b[22m()\r\n       \u001b[1mexecvp\u001b[22m()\r\n              POSIX.1-2008.\r\n\r\n       \u001b[1mexecvpe\u001b[22m()\r\n              GNU.\r\n\r\n\u001b[1mHISTORY\u001b[0m\r\n       \u001b[1menviron\u001b[0m\r\n       \u001b[1mexecl\u001b[22m()\r\n       \u001b[1mexeclp\u001b[22m()\r\n       \u001b[1mexecle\u001b[22m()\r\n       \u001b[1mexecv\u001b[22m()\r\n       \u001b[1mexecvp\u001b[22m()\r\n              POSIX.1-2001.\r\n\r\n       \u001b[1mexecvpe\u001b[22m()\r\n              glibc 2.11.\r\n\r\n\u001b[1mBUGS\u001b[0m\r\n       Before glibc 2.24, \u001b[1mexecl\u001b[22m() and \u001b[1mexecle\u001b[22m() employed \u001b[1mrealloc\u001b[22m(3)  internally\r\n       and  were  consequently  not async-signal-safe, in violation of the re\u2010\r\n       quirements of POSIX.1.  This was fixed in glibc 2.24.\r\n\r\n   \u001b[1mArchitecture-specific details\u001b[0m\r\n       On sparc and sparc64, \u001b[1mexecv\u001b[22m() is provided as a system call by the  ker\u2010\r\n       nel  (with  the  prototype  shown  above) for compatibility with SunOS.\r\n       This function is \u001b[4mnot\u001b[24m employed by the \u001b[1mexecv\u001b[22m() wrapper function on  those\r\n       architectures.\r\n\r\n\u001b[1mSEE ALSO\u001b[0m\r\n       \u001b[1msh\u001b[22m(1),  \u001b[1mexecve\u001b[22m(2),  \u001b[1mexecveat\u001b[22m(2),  \u001b[1mfork\u001b[22m(2),  \u001b[1mptrace\u001b[22m(2), \u001b[1mfexecve\u001b[22m(3), \u001b[1msys\u2010\u001b[0m\r\n       \u001b[1mtem\u001b[22m(3), \u001b[1menviron\u001b[22m(7)\r\n\r\nLinux man-pages 6.7               2023-10-31                           \u001b[4mexec\u001b[24m(3)\r\n\u001b[?2004htrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "d470c25b14ae4722bae58e05c61fe13a": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "da426875cb46469cb821f2a8b65a4f14": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "1in", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "df2558b8f6df4cb7bf678f5bf184d676": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_3e438ff8d9164d8ebb89ae28519565d3", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ cat /tmp/reshello\r\nHello class\r\ntrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "f90499acc72140bbb132cddfca865075": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_62e24525c99e4f8b80e77a024dfb7e5b", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ [[ -d mydir ]] && rm -rf mydir\r\ntrantor@P7xxTM1:~$     [[ -a myfile ]] && rm myfile\r\ntrantor@P7xxTM1:~$     [[ -a errors ]] && rm errors \r\ntrantor@P7xxTM1:~$     [[ -a mydate ]] && rm mydate\r\ntrantor@P7xxTM1:~$     [[ -a mynewdir ]] && rm -rf mynewdir\r\ntrantor@P7xxTM1:~$     [[ -a anotherfile ]] && rm anotherfile\r\ntrantor@P7xxTM1:~$     [[ -a mybin ]] && rm -rf  mybin\r\ntrantor@P7xxTM1:~$     [[ -a myinfo ]] && rm myinfo\r\ntrantor@P7xxTM1:~$ "}], "tabbable": null, "tooltip": null}}, "f9cd52da2e61445ea0a1112ffcaea7b0": {"model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "model_name": "OutputModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_6107b0c4241d488dbba778189f196b76", "msg_id": "", "outputs": [{"name": "stdout", "output_type": "stream", "text": "$ pwd\r\n\u001b[?2004l\r/home/trantor/lec3\r\n\u001b[?2004htrantor@P7xxTM1:~/lec3$ "}], "tabbable": null, "tooltip": null}}, "ff0220ffa24e4d8ba72e0a45c2d7dc74": {"model_module": "@jupyter-widgets/base", "model_module_version": "2.0.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "2.0.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "2.0.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border_bottom": "1px solid black", "border_left": "1px solid black", "border_right": "1px solid black", "border_top": "1px solid black", "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": "100%", "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}}, "version_major": 2, "version_minor": 0}</script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script crossorigin="anonymous" data-jupyter-widgets-cdn="https://cdn.jsdelivr.net/npm/" src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@1.0.6/dist/embed-amd.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'intro/abstractions';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="5. What you should know" href="tools.html" />
    <link rel="prev" title="3. Operating System Structure &amp; Unix/Linux" href="structure.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="pref.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="Introduction to Operating Systems - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="Introduction to Operating Systems - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="pref.html">
                    Preface
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting started</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="intro.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="purpose.html">2. Purpose of operating systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">3. Operating System Structure &amp; Unix/Linux</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">4. Operating System Abstractions</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tools.html">5. What you should know</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="tools-c.html">5.1. The C Programming Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools-shell.html">5.2. Shell</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools-editors.html">5.3. Editors</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools-make.html">5.4. Make</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools-testing.html">5.5. Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools-git.html">5.6. Git Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools-gdb.html">5.7. GDB</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Virtual Processor</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../scheduling/intro.html">6. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduling/process.html">7. The Process: A virtual Computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduling/virtual.html">8. Virtualizing the CPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduling/threads.html">9. The Thread: A Virtual CPU</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../scheduling/scheduling.html">10. Scheduling</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../scheduling/sch-goals.html">10.1. Scheduling Goals</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduling/sch-simple.html">10.2. Simple Examples of Scheduling Policies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduling/sch-prio.html">10.3. Scheduling with Priorities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../scheduling/sch-real.html">10.4. Scheduling in the real world</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../scheduling/review.html">11. Review Questions</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Virtual Memory</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../mm/intro.html">12. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mm/phys-and-seg.html">13. Memory management before paged virtual memory</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../mm/pagvm.html">14. Paged Virtual memory</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../mm/vmabs.html">14.1. Abstracting a useful interface for memory management.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mm/virt-paging.html">14.2. Paging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mm/page-tables.html">14.3. Page Tables</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mm/reclamation.html">14.4. Memory reclaiming algorithms.</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mm/page-size.html">14.5. Page Sizes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mm/pagefaults.html">14.6. Memory Management Page Faults</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../mm/buffer-cache.html">15. Buffer Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mm/realworld.html">16. Memory management in the real world</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mm/concl.html">17. Conclusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mm/review.html">18. Review</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">File Systems</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../fs/intro.html">19. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fs/interface.html">20. File System Abstraction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fs/diskhw.html">21. A bit about Disks</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../fs/impl.html">22. Implementation</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../fs/disklayout.html">22.1. File System Layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fs/dl_track_used.html">22.2. Disk Layout:Tracking Used Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fs/dl_track_free.html">22.3. Disk Layout:Tracking Free Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fs/dl_name.html">22.4. Disk Layout:Implementing Name Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fs/dl_failures.html">22.5. Disk Layout:Dealing with Failures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fs/dl_ex_exx.html">22.6. Disk Layout:Examples of Real World File Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fs/kernelimp.html">22.7. Kernel implementation</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../fs/review.html">23. Review</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Concurrency</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../sync/sync.html">24. Introduction</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../sync/basic.html">25. Basic Synchronization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../sync/sharing.html">25.1. Cooperating Processes and Inter-process Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sync/criticalsection.html">25.2. The Critical Section Problem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sync/locks.html">25.3. Implementing Locks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sync/ordering.html">25.4. Ordering Thread Events</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../sync/concurrency_bugs.html">26. Common Concurrency Bugs</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../sync/advanced.html">27. Advanced Synchronization</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../sync/readmostly.html">27.1. Read-Dominated Workloads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sync/hardware_challenges.html">27.2. Challenges of Modern Hardware</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sync/linux_locking.html">27.3. Locking in the Linux Kernel</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../sync/review.html">28. Review</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Other Topics</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../devices/devices.html">29. Input and Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devices/disk2.html">30. More on Disks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../virt/virt.html">31. Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sec/sec.html">32. Security</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../misc/howto.html">33. How to read this book</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../contributing/intro.html">34. Contributing</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../contributing/examples.html">34.1. Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/credit.html">34.2. Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/Contributing.html">34.3. Contributing</a></li>


<li class="toctree-l2"><a class="reference internal" href="../contributing/resources.html">34.6. Resources to look at</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contributing/fix.html">34.7. Out of date</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/bib.html">35. Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://jupyterhub-opf-jupyterhub.apps.smaug.na.operate-first.cloud/hub/user-redirect/git-pull?repo=https%3A//github.com/OpenOSOrg/openos&urlpath=lab/tree/openos/content/intro/abstractions.ipynb&branch=main" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on JupyterHub"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="JupyterHub logo" src="../_static/images/logo_jupyterhub.svg">
  </span>
<span class="btn__text-container">JupyterHub</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/OpenOSOrg/openos" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/OpenOSOrg/openos/edit/main/content/intro/abstractions.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/OpenOSOrg/openos/issues/new?title=Issue%20on%20page%20%2Fintro/abstractions.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/intro/abstractions.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Operating System Abstractions</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#everything-is-a-file">4.1. Everything is a file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#process-management">4.2. Process management</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#state">4.2.1. State</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#system-calls">4.2.2. System calls</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">4.2.3. Examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">4.2.4. Summary</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-system">4.3. File system</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-stdin-and-stdout">4.4. Changing stdin and stdout</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pipes">4.5. Pipes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#signals-protecting-against-dreaded-zombies">4.6. Signals protecting against dreaded zombies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">4.7. Conclusion</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <div class="cell tag_remove-input docutils container">
</div>
<section class="tex2jax_ignore mathjax_ignore" id="operating-system-abstractions">
<span id="cont-gs-abstractions"></span><h1><span class="section-number">4. </span>Operating System Abstractions<a class="headerlink" href="#operating-system-abstractions" title="Link to this heading">#</a></h1>
<p>UNIX has instilled in generations of engineers a basic aesthetic for how to design and structure complicated collections of software.  In particular one learns that the designers of UNIX tried to structure the system around a small core set of ideas, “abstractions”, that once understood allows a programmer to understand the rest of the system and how to get things done.</p>
<p>We first describe the fundamental abstraction of <a class="reference internal" href="#cont-gs-abstractions-file"><span class="std std-ref">files</span></a>, which is central to Unix’s ability to compose programs together, and how this enables powerful functionality to be implemented in a shell.  We then, using a shell as an example, briefly discuss key abstractions and the interfaces a shell uses to control <a class="reference internal" href="#cont-gs-abstractions-process"><span class="std std-ref">processes</span></a>, enable processes to <a class="reference internal" href="#cont-gs-abstractions-pipes"><span class="std std-ref">communicate</span></a>, operate on <a class="reference internal" href="#cont-gs-abstractions-fs"><span class="std std-ref">files in a file system</span></a> and find out what <a class="reference internal" href="#cont-gs-abstractions-signals"><span class="std std-ref">happened</span></a> to processes it started.</p>
<section id="everything-is-a-file">
<span id="cont-gs-abstractions-file"></span><h2><span class="section-number">4.1. </span>Everything is a file<a class="headerlink" href="#everything-is-a-file" title="Link to this heading">#</a></h2>
<p>A core idea of Unix is that everything is a file, where a file is a stream of bytes.  As shown in <a class="reference internal" href="#file-desc"><span class="std std-numref">Fig. 4.1</span></a>, the kernel maintains for each process a <em>file descriptor table</em>, where a file descriptor is an index into that table that can be used to read or write to a particular file.  The system calls that work on all files are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">write(desc,</span> <span class="pre">buffer,</span> <span class="pre">len)</span></code>: Write <code class="docutils literal notranslate"><span class="pre">len</span></code> bytes (or fewer if no more space is available) from <code class="docutils literal notranslate"><span class="pre">buffer</span></code> into a stream identified by <code class="docutils literal notranslate"><span class="pre">desc</span></code> and return the actual number of bytes written, <code class="docutils literal notranslate"><span class="pre">n</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">=</span> <span class="pre">read(desc,</span> <span class="pre">buffer,</span> <span class="pre">max)</span></code>: Read <code class="docutils literal notranslate"><span class="pre">max</span></code> bytes (or fewer if no more data is available) from stream identified by <code class="docutils literal notranslate"><span class="pre">desc</span></code> into <code class="docutils literal notranslate"><span class="pre">buffer</span></code> and return the actual number of bytes read, <code class="docutils literal notranslate"><span class="pre">n</span></code>.</p></li>
</ul>
<p>To understand how to use these operations, you really need to read the manual.  In Linux you can find out about everything using the <strong>man</strong> program.  For example, <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">2</span> <span class="pre">write</span></code> tells you everything about the <code class="docutils literal notranslate"><span class="pre">write</span></code> system call:</p>
<div class="margin admonition note">
<p class="admonition-title">Note</p>
<p>In this case, the <em>2</em> refers to the section of the manual for system calls.  To find out about the different sections, you, of course, read the manual about the man command.</p>
</div>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "add5f27cf4304587aea22799ac31e98b", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>To make files in the file system look like a stream, on each read or write operation, the kernel increases a (per open file)  <code class="docutils literal notranslate"><span class="pre">offset</span></code> by the amount of data read or written.  It turns out that this naturally matches many applications that read or write files in their entirety.</p>
<p>Entries are added to the file descriptor table by operations that open or create a regular file, or create a special file like a network connection or a tty.  There are three special file descriptors shown in <a class="reference internal" href="#fd-table"><span class="std std-numref">Table 4.1</span></a>, that programs (and libraries) should use for input, output and errors.</p>
<figure class="align-default" id="file-desc">
<a class="reference internal image-reference" href="../_images/osstructure-fd.drawio.png"><img alt="../_images/osstructure-fd.drawio.png" src="../_images/osstructure-fd.drawio.png" style="width: 60%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.1 </span><span class="caption-text">The kernel maintains for each process an array of file descriptors, where a process can read or write to any kind of I/O object that is open in its table.</span><a class="headerlink" href="#file-desc" title="Link to this image">#</a></p>
</figcaption>
</figure>
<div class="pst-scrollable-table-container"><table class="table" id="fd-table" style="width: 4in">
<caption><span class="caption-number">Table 4.1 </span><span class="caption-text">Standard well known file descriptors.</span><a class="headerlink" href="#fd-table" title="Link to this table">#</a></caption>
<colgroup>
<col style="width: 10.7%" />
<col style="width: 17.9%" />
<col style="width: 71.4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>stdin</p></td>
<td><p>standard input; process should read data from here</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>stdout</p></td>
<td><p>standard output; process will write its output here</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>stderr</p></td>
<td><p>standard error; process should write out errors here</p></td>
</tr>
</tbody>
</table>
</div>
<p>So, for example, the following program echos a string to the terminal, which is the default stream for <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stdin</span></code>:</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "bdde6b49f1544bfcae00aee072e5e6cf", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>While the same program can have its output redirected to a file:</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "57f2cf84204249af9253e849c29d1169", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>And we can see that the contents of this file are the same as what was previously written to the terminal by using the <code class="docutils literal notranslate"><span class="pre">cat</span></code> program, which writes the contents of a file to its <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, i.e., the terminal:</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "df2558b8f6df4cb7bf678f5bf184d676", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="margin admonition note">
<p class="admonition-title">Note</p>
<p>This probably seems obvious to a modern reader, i.e., an object-oriented design, where you can do the same operations on any object. However, at the time, it was a radical idea when operating systems had specialized interfaces for files with records, devices such as terminals, etc…</p>
</div>
<p>This fundamental idea introduced by UNIX, that you can use the same  <code class="docutils literal notranslate"><span class="pre">read</span></code> and <code class="docutils literal notranslate"><span class="pre">write</span></code> operations on any kind of I/O object, is very powerful.  It enables a single program, depending on how it is launched by the shell, to work on data stored in a file system, data entered on a keyboard, or even on data sent over a network by other processes.  By introducing the idea of a special file object called a <em>pipe</em>, you could allow programs to be combined together to do much more powerful tasks.   The <strong>|</strong> symbol tells the shell to create a pipe that connects the output of one program to the input of the next program.  So, let’s say we are trying to find all the programs on our computer that have anything to do with perl; the following command will: 1) list the contents of the <code class="docutils literal notranslate"><span class="pre">/usr/bin/</span></code> directory, 2) send the output of that listing to a <code class="docutils literal notranslate"><span class="pre">grep</span></code> program that searches for the word perl, and 3) send the output of that <code class="docutils literal notranslate"><span class="pre">grep</span></code> to a program that counts the number of lines of input received.</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "57faad20691a4f6b80e186544f8dacaa", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>Today, the idea of <em>everything is a file</em> has been taken much further in Linux.  Linux now exposes all kinds of information through synthetic file systems, giving users and administrators massive ability to automate.  For example, in the <code class="docutils literal notranslate"><span class="pre">bash</span></code> shell we are using <code class="docutils literal notranslate"><span class="pre">$$</span></code> lets us know the <code class="docutils literal notranslate"><span class="pre">id</span></code> of the bash process itself.  So, stealing a nice example from <a class="reference external" href="https://jappavoo.github.io/UndertheCovers/textbook/unix/shellintro.html#standard-output-and-redirection">jonathan</a>, the following command shows a portion of the open file table for the bash process that executes the command:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "348bdd52fa334b598eccd5406a47d725", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>We can see that file descriptors 0, 1 and 2 (<code class="docutils literal notranslate"><span class="pre">stdin</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code>) all refer to the same file, and we can learn more about this file using another command:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "7840dd3e80644f3dad5283ad1603db99", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>Now we can see that our <code class="docutils literal notranslate"><span class="pre">stdin</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> all point to a character special file, which is used to represent a terminal in Unix. We can write to that same special device and it will appear in our terminal.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "90b9006d4b354c71bb60e2f97905a8ea", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>I would strongly encourage reading the shell and Unix sections of <a class="reference external" href="https://jappavoo.github.io/UndertheCovers/textbook/intro_tb.html#under-the-covers-the-secret-life-of-software">Under the Covers: The Secret Life of Software</a>  for a much more detailed coverage of this material.  However, hopefully this has given you enough information to understand the power Unix unleashed by introducing polymorphism in the operating system, and creating a shell that enables you to combine all kinds of programs together in complicated ways.</p>
<p>The remainder of this chapter introduces the core abstractions of Unix, and the system calls you use on those examples, all with examples from a shell. By the end of this chapter, you should understand how a shell can start and control the execution of other programs, including how the <code class="docutils literal notranslate"><span class="pre">stdin</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout</span></code>, and <code class="docutils literal notranslate"><span class="pre">stderr</span></code> I/O streams used by a process can be manipulated to enable the seamless composition of programs.</p>
</section>
<section id="process-management">
<span id="cont-gs-abstractions-process"></span><h2><span class="section-number">4.2. </span>Process management<a class="headerlink" href="#process-management" title="Link to this heading">#</a></h2>
<p>As discussed <a class="reference internal" href="structure.html#cont-gs-structure-struc"><span class="std std-ref">previously</span></a>, a process is a virtual computer, and the kernel provides each process with: 1) an abstraction of an isolated CPU (while multiplexing the physical CPU between different processes), 2) a <em>virtual memory</em> abstraction of massive contiguous memory that starts at address <code class="docutils literal notranslate"><span class="pre">0x0</span></code>, and 3) a set of file abstractions that allow the process to persist data and communicate with other processes.    After discussing the state maintained by the kernel, we discuss the interfaces the shell (or any application) can use to manipulate processes.</p>
<section id="state">
<h3><span class="section-number">4.2.1. </span>State<a class="headerlink" href="#state" title="Link to this heading">#</a></h3>
<p>As shown in <a class="reference internal" href="#img-intro-proc"><span class="std std-numref">Fig. 4.2</span></a>, the kernel maintains a table of all processes, indexed by the <em>process id</em>, or <code class="docutils literal notranslate"><span class="pre">PID</span></code>, to keep track of all the information about each process.   This includes a pointer to the file descriptor table (discussed <a class="reference internal" href="#file-desc"><span class="std std-ref">earlier</span></a>), as well as data structures to maintain CPU and memory management state.  For CPU state, this includes all the registers that need to be loaded when the process runs.</p>
<figure class="align-default" id="img-intro-proc">
<a class="reference internal image-reference" href="../_images/osstructure-proc.drawio.png"><img alt="../_images/osstructure-proc.drawio.png" src="../_images/osstructure-proc.drawio.png" style="width: 80%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.2 </span><span class="caption-text">A process table in the kernel, indexed by PID, points to the file descriptor table, memory management regions, and CPU state.</span><a class="headerlink" href="#img-intro-proc" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>In today’s computers, the address space, or <em>virtual memory</em>, of a process is a huge contiguous abstraction of memory that extends across addresses 0 to <span class="math notranslate nohighlight">\(2^{64}-1\)</span>.  As shown in <a class="reference internal" href="#img-intro-mmlay"><span class="std std-numref">Fig. 4.3</span></a>, it is typically divided into  <em>code</em> or machine-language instructions (for some reason typically
called “text”), <em>initialized data</em>, consisting of read-only and
read-write initialized data, <em>initialized-zero data</em>, called “BSS” for
obscure historical reasons, <em>heap</em> or dynamically allocated memory, and
<em>stack</em>.  The <em>memory regions</em> referred to in <a class="reference internal" href="#img-intro-mmlay"><span class="std std-numref">Fig. 4.3</span></a> keep track of each of these regions.</p>
<figure class="align-right" id="img-intro-mmlay">
<a class="reference internal image-reference" href="../_images/trad-addr-space.png"><img alt="../_images/trad-addr-space.png" src="../_images/trad-addr-space.png" style="width: 45%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.3 </span><span class="caption-text">Virtual memory layout</span><a class="headerlink" href="#img-intro-mmlay" title="Link to this image">#</a></p>
</figcaption>
</figure>
</section>
<section id="system-calls">
<span id="cont-gs-abstractions-process-syscalls"></span><h3><span class="section-number">4.2.2. </span>System calls<a class="headerlink" href="#system-calls" title="Link to this heading">#</a></h3>
<p>Key system calls in traditional Unix related to processes are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pid</span> <span class="pre">=</span> <span class="pre">fork(void)</span></code>:  Create a child process that is a duplicate of the parent; return 0 in child, and <code class="docutils literal notranslate"><span class="pre">PID</span></code> of child in parent.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exit(status)</span></code>: Terminate the calling process and record the status passed in for others.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pid</span> <span class="pre">=</span> <span class="pre">waitpid(cpid,</span> <span class="pre">*status...)</span></code>: Wait for specified child process <code class="docutils literal notranslate"><span class="pre">cpid</span></code> to complete (or change state), fill <code class="docutils literal notranslate"><span class="pre">*status</span></code> with the status passed on child’s exit, and garbage collect any kernel resources; return the <code class="docutils literal notranslate"><span class="pre">PID</span></code> of the child process that exited (or changed state).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">err</span> <span class="pre">=</span> <span class="pre">execve(program,</span> <span class="pre">arguments,</span> <span class="pre">environment)</span></code>: executing the file <code class="docutils literal notranslate"><span class="pre">program</span></code> with specified arguments and environment information</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">fork</span></code> system call duplicates the calling process (referred to as the <em>parent</em>) into a new <em>child</em> process, where the only difference that enables the parent and child to distinguish themself is the return value.  You can think of this logically as creating a copy of all the process memory, copying the CPU state, and copying the file descriptor table (while incrementing reference counts on all the files pointed to by the file descriptor table).</p>
<p>Unix maintains a process tree in the kernel, where every process has a parent, and a parent may have many children.   For example, below I run the bash shell several times, and then print out the process tree (see <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">ps</span></code> for arguments). You can see that ps is a child of bash, which is a child of bash, and so on.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "4a2c1789e8f44cb69d8429d6956084dc", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">exit</span></code> system call causes the process to complete, passing in a status for the reason and <code class="docutils literal notranslate"><span class="pre">waitpid</span></code> waits for a <em>process</em> to change state, and if it has exited, returns the status passed in by <code class="docutils literal notranslate"><span class="pre">exit</span></code>.    While most of the process state is freed (e.g., the file descriptor table and memory regions) by <code class="docutils literal notranslate"><span class="pre">exit</span></code>, the process descriptor stays around to keep track of this status information. As a result, if another process does not do a wait on a process, it will become a <strong>zombie</strong> (yes, that is a real Unix term) holding on to a process descriptor in the kernel forever.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">execve</span></code> system call executes a new program replacing the memory regions (BSS, text, …) of the calling process with memory from the file which the <code class="docutils literal notranslate"><span class="pre">program</span></code> argument points to.  The CPU state is set to pass in the arguments, and the file descriptor table is not modified.  Note, <code class="docutils literal notranslate"><span class="pre">exec</span></code> will never return unless there was some kind of failure; it is the same process just executing a different program.</p>
</section>
<section id="examples">
<span id="cont-gs-abstractions-process-example"></span><h3><span class="section-number">4.2.3. </span>Examples<a class="headerlink" href="#examples" title="Link to this heading">#</a></h3>
<p>Okay let’s look at some code to better understand how these process-related system calls are used, starting with <code class="docutils literal notranslate"><span class="pre">fork()</span></code>.</p>
<div class="literal-block-wrapper docutils container" id="testfork-listing">
<div class="code-block-caption"><span class="caption-number">Listing 4.1 </span><span class="caption-text">testfork.c - A simple program to illustrate fork()</span><a class="headerlink" href="#testfork-listing" title="Link to this code">#</a></div>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;sys/types.h&gt;</span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;unistd.h&gt;</span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="linenos"> 4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="kt">int</span>
<span class="linenos"> 7</span><span class="nf">main</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">argc</span><span class="p">,</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">argv</span><span class="p">[])</span><span class="w"> </span>
<span class="linenos"> 8</span><span class="p">{</span>
<span class="linenos"> 9</span><span class="w">  </span><span class="kt">pid_t</span><span class="w"> </span><span class="n">mypid</span><span class="p">,</span><span class="w"> </span><span class="n">cpid</span><span class="p">,</span><span class="w"> </span><span class="n">ppid</span><span class="p">;</span>
<span class="linenos">10</span><span class="w">  </span><span class="n">cpid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fork</span><span class="p">();</span>
<span class="linenos">11</span><span class="w">  </span><span class="n">ppid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getppid</span><span class="p">();</span>
<span class="linenos">12</span><span class="w">  </span><span class="n">mypid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">getpid</span><span class="p">();</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cpid</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">15</span><span class="w">    </span><span class="cm">/* Parent code */</span><span class="w"> </span>
<span class="linenos">16</span><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;hello, from parent with pid %d, pid of child is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">mypid</span><span class="p">,</span><span class="w"> </span><span class="n">cpid</span><span class="p">);</span>
<span class="linenos">17</span><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cpid</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">18</span><span class="w">    </span><span class="cm">/* Child code */</span>
<span class="linenos">19</span><span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;hello, I am child with pid %d, my parent is %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">mypid</span><span class="p">,</span><span class="w"> </span><span class="n">ppid</span><span class="p">);</span>
<span class="linenos">20</span><span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">21</span><span class="w">    </span><span class="n">perror</span><span class="p">(</span><span class="s">&quot;fork failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="linenos">22</span><span class="w">    </span><span class="n">exit</span><span class="p">(</span><span class="mi">-1</span><span class="p">);</span>
<span class="linenos">23</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">24</span><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos">25</span><span class="p">}</span><span class="w"> </span>
</pre></div>
</div>
</div>
<p>The result of running the code in <a class="reference internal" href="#testfork-listing"><span class="std std-numref">Listing 4.1</span></a> is:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "7c55d9ac0b7c4df49285d79302339fad", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>The parent prints out the child <code class="docutils literal notranslate"><span class="pre">pid</span></code> that it gets from <code class="docutils literal notranslate"><span class="pre">fork</span></code>, and then its <code class="docutils literal notranslate"><span class="pre">pid</span></code> (from calling <code class="docutils literal notranslate"><span class="pre">getpid()</span></code>).  You can see that these values match the pid that the child gets from <code class="docutils literal notranslate"><span class="pre">getppid()</span></code>. Again, please use man to find out about any of these system calls.</p>
<p>To see how one can use the combination of <code class="docutils literal notranslate"><span class="pre">fork</span></code> and <code class="docutils literal notranslate"><span class="pre">exec</span></code> to start a new program, and wait until that program completes, see <a class="reference internal" href="#doforke-listing"><span class="std std-numref">Listing 4.2</span></a> below.  Note that it is an error if the procedure returns from <code class="docutils literal notranslate"><span class="pre">exec</span></code>. Also, note that the parent explicitly waits for the <code class="docutils literal notranslate"><span class="pre">pid</span></code> of the child returned by fork on line 22, and then returns that status.</p>
<div class="literal-block-wrapper docutils container" id="doforke-listing">
<div class="code-block-caption"><span class="caption-number">Listing 4.2 </span><span class="caption-text">doforke.c - A simple program to illustrate fork() and exec()</span><a class="headerlink" href="#doforke-listing" title="Link to this code">#</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">#include &lt;sys/types.h&gt;</span>
<span class="linenos"> 2</span><span class="c1">#include &lt;unistd.h&gt;</span>
<span class="linenos"> 3</span><span class="c1">#include &lt;stdio.h&gt;</span>
<span class="linenos"> 4</span><span class="c1">#include &lt;stdlib.h&gt;</span>
<span class="linenos"> 5</span><span class="c1">#include &lt;sys/wait.h&gt;</span>
<span class="linenos"> 6</span><span class="c1">#include &quot;doforke.h&quot;</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="nb">int</span>
<span class="linenos">10</span><span class="n">do_fork_exec</span><span class="p">(</span><span class="n">char</span> <span class="o">*</span><span class="n">prog</span><span class="p">,</span> <span class="n">char</span> <span class="o">*</span><span class="n">const</span> <span class="n">argv</span><span class="p">[])</span>
<span class="linenos">11</span><span class="p">{</span>
<span class="linenos">12</span>  <span class="n">pid_t</span> <span class="n">cpid</span><span class="p">;</span>
<span class="linenos">13</span>  <span class="nb">int</span> <span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
<span class="hll"><span class="linenos">14</span>  <span class="n">cpid</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>
</span><span class="linenos">15</span>  <span class="k">if</span> <span class="p">(</span><span class="n">cpid</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">16</span>    <span class="n">perror</span><span class="p">(</span><span class="s2">&quot;fork failed</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="linenos">17</span>    <span class="n">exit</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
<span class="linenos">18</span>  <span class="p">}</span>
<span class="linenos">19</span>
<span class="linenos">20</span>  <span class="k">if</span> <span class="p">(</span><span class="n">cpid</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">21</span>    <span class="o">//</span> <span class="n">parent</span> <span class="n">code</span><span class="p">,</span> <span class="n">we</span> <span class="n">need</span> <span class="n">to</span> <span class="n">wait</span> <span class="k">for</span> <span class="n">child</span>
<span class="hll"><span class="linenos">22</span>    <span class="n">waitpid</span><span class="p">(</span><span class="n">cpid</span><span class="p">,</span><span class="o">&amp;</span><span class="n">status</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
</span><span class="linenos">23</span>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="hll"><span class="linenos">24</span>    <span class="n">execve</span><span class="p">(</span><span class="n">prog</span><span class="p">,</span> <span class="n">argv</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class="linenos">25</span>    <span class="n">perror</span><span class="p">(</span><span class="s2">&quot;should never get here</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">);</span>
<span class="linenos">26</span>  <span class="p">}</span>
<span class="linenos">27</span>  <span class="k">return</span> <span class="n">status</span><span class="p">;</span>
<span class="linenos">28</span><span class="p">}</span> 
</pre></div>
</div>
</div>
</section>
<section id="summary">
<h3><span class="section-number">4.2.4. </span>Summary<a class="headerlink" href="#summary" title="Link to this heading">#</a></h3>
<p>So, you should now understand the abstraction of a process as a virtual computer, with CPU state and virtual memory.  A process (parent) can create another process (child) by calling <code class="docutils literal notranslate"><span class="pre">fork</span></code> which causes the kernel to create a child with a duplicate of the CPU state and virtual memory of the parent.  The child, like children everywhere, can decide to be different from its parent by <code class="docutils literal notranslate"><span class="pre">exec</span></code> of a different program.  In that case the kernel looks at the program, and creates a new virtual address space by loading (potentially lazily as we will see) the text, initialized, and uninitialized  data segments of the program into memory.  You can now see how to implement the core part of any shell, reading from <code class="docutils literal notranslate"><span class="pre">stdin</span></code> the names of programs to execute, and creating new processes to execute those programs.</p>
</section>
</section>
<section id="file-system">
<span id="cont-gs-abstractions-fs"></span><h2><span class="section-number">4.3. </span>File system<a class="headerlink" href="#file-system" title="Link to this heading">#</a></h2>
<p>Normally, the programs to be executed come out of a file system, and we are often using redirection (e.g., <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>) to set the input or output of the program into some file in a file system.   We will discuss <a class="reference internal" href="../fs/interface.html#cont-fs-interface"><span class="std std-ref">later</span></a> in much more detail the abstractions of a file system, but for now we briefly introduce the key information you need to know.  First, it is important to realize that all Unix file systems organize information in a hierarchy as shown in <a class="reference internal" href="#fs-tree-logical-abs"><span class="std std-numref">Fig. 4.4</span></a>.</p>
<figure class="align-default" id="fs-tree-logical-abs">
<a class="reference internal image-reference" href="../_images/filesys-tree.png"><img alt="../_images/filesys-tree.png" src="../_images/filesys-tree.png" style="width: 45%;" /></a>
<figcaption>
<p><span class="caption-number">Fig. 4.4 </span><span class="caption-text">Logical view: hierarchical file system name space</span><a class="headerlink" href="#fs-tree-logical-abs" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>We talked earlier about doing an exec, and with the <code class="docutils literal notranslate"><span class="pre">execve</span></code> call above, you need to specify the absolute path name to the program being executed.  For example, if you want to run the cat program, the argument to <code class="docutils literal notranslate"><span class="pre">execve</span></code> on our system would be <code class="docutils literal notranslate"><span class="pre">/usr/bin/cat</span></code>.</p>
<p>You can tell the shell where to search for executable programs by specifying a <code class="docutils literal notranslate"><span class="pre">PATH</span></code> <em>environment variable</em>. For example, the following <code class="docutils literal notranslate"><span class="pre">echo</span></code> tells you the list of directories where the shell should look for executables, such as the program <code class="docutils literal notranslate"><span class="pre">cat</span></code>. The subsequent <code class="docutils literal notranslate"><span class="pre">type</span></code> command tells you where the shell will find an executable for <code class="docutils literal notranslate"><span class="pre">cat</span></code>.</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "98b2817397f847ea94283c41a9bc6abc", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>Notice that the path to <code class="docutils literal notranslate"><span class="pre">cat</span></code> appears in the <code class="docutils literal notranslate"><span class="pre">PATH</span></code> variable shown by the <code class="docutils literal notranslate"><span class="pre">echo</span></code> command. So, a shell could go through each element of the path environment variable searching for a program. Thankfully, there is a whole family of library calls built on top of the <code class="docutils literal notranslate"><span class="pre">execve</span></code> system call that does this work for you (see <code class="docutils literal notranslate"><span class="pre">execlp</span></code> from the <code class="docutils literal notranslate"><span class="pre">man</span></code> page below, for example).</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "cd9e9fc8729149e0a07725c0869b33b7", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>Some of the system calls specific to file systems are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">desc</span> <span class="pre">=</span> <span class="pre">open(pathname,</span> <span class="pre">O_READ)</span></code>: Verify that file <code class="docutils literal notranslate"><span class="pre">name</span></code> exists and may
be read, and then return a <em>descriptor</em> which may be used to refer to
that file when reading it.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">desc</span> <span class="pre">=</span> <span class="pre">open(pathname,</span> <span class="pre">O_WRITE</span> <span class="pre">|</span> <span class="pre">flags,</span> <span class="pre">mode)</span></code>: Verify permissions and
open <code class="docutils literal notranslate"><span class="pre">name</span></code> for writing, creating it (or erasing existing contents) if
necessary as specified in <code class="docutils literal notranslate"><span class="pre">flags</span></code>. Returns a descriptor which may be
used for writing to that file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">close(desc)</span></code>: stop using this descriptor, decrement reference count in the file, and, if the reference count is zero, free any resources
allocated for it.</p></li>
</ul>
<p>Every process has associated with it a <em>current working directory</em> .  If the <code class="docutils literal notranslate"><span class="pre">pathname</span></code> argument to <code class="docutils literal notranslate"><span class="pre">open</span></code> starts with a <code class="docutils literal notranslate"><span class="pre">/</span></code>, then it is an absolute path from the top of the file tree.  If it doesn’t, then it is interpreted relative to the current working directory.  This is convenient, since often you are doing all your work in your own directory, and you don’t need to figure out where that is in the whole file system.</p>
<p>The unix command <code class="docutils literal notranslate"><span class="pre">pwd</span></code> tells you the current working directory that the shell is currently executing in, e.g.:</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "f9cd52da2e61445ea0a1112ffcaea7b0", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>A <code class="docutils literal notranslate"><span class="pre">close</span></code> call tells the kernel you are not using a file anymore,  However, the kernel can’t free up resources until the reference count goes to zero, since others may be using the same file.  On a fork, the kernel increments a reference count on each of the files, since now both the parent and child processes have it open, and both the parent and the child should close the file.</p>
</section>
<section id="changing-stdin-and-stdout">
<h2><span class="section-number">4.4. </span>Changing stdin and stdout<a class="headerlink" href="#changing-stdin-and-stdout" title="Link to this heading">#</a></h2>
<p>So far, we have seen how a shell can start another process (via <code class="docutils literal notranslate"><span class="pre">fork</span></code>) and how this child process can start running a different program (via <code class="docutils literal notranslate"><span class="pre">exec</span></code>), as well as how to open a file in the file system. Recall that the shell process has file descriptors 0, 1 and 2 (<code class="docutils literal notranslate"><span class="pre">stdin</span></code>, <code class="docutils literal notranslate"><span class="pre">stdout</span></code> and <code class="docutils literal notranslate"><span class="pre">stderr</span></code>) pointing to a character special file that represents a terminal, meaning that its input comes from a user typing characters in the terminal, and its output is displayed in the terminal. Recall also that the open file table is copied to the child process on a <code class="docutils literal notranslate"><span class="pre">fork</span></code> and is unchanged by an <code class="docutils literal notranslate"><span class="pre">exec</span></code>, so the child process running the new program will also receive its input from, and send its output to, the same terminal.</p>
<p>Now we will see how to support the <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> I/O redirection operators in the shell, which allow a process to read its input from a file, or write its output to a file, respectively. All we need to do is get the kernel to change the file descriptor table, so that descriptors 0 or 1 point to the specified input or output files. We can also redirect the standard error output, descriptor 2, to a file in a similar way.</p>
<p>Whenever we need the kernel to do something on behalf of a process, we need a system call, and for this purpose we use the <code class="docutils literal notranslate"><span class="pre">dup</span></code> system calls:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">err</span> <span class="pre">=</span> <span class="pre">dup(oldfd)</span></code> : creates a copy of the file descriptor <code class="docutils literal notranslate"><span class="pre">oldfd</span></code>, using the lowest-numbered unused file descriptor for the new descriptor.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">err</span> <span class="pre">=</span> <span class="pre">dup2(oldfd,</span> <span class="pre">newfd)</span></code> : creates a copy of the file descriptor <code class="docutils literal notranslate"><span class="pre">oldfd</span></code>, to <code class="docutils literal notranslate"><span class="pre">newfd</span></code>; closing <code class="docutils literal notranslate"><span class="pre">newfd</span></code> if there is already an entry there.</p></li>
</ul>
<p>So, imagine we have the following shell script:</p>
<p><code class="docutils literal notranslate"> <span class="pre">foo</span> <span class="pre">&gt;</span> <span class="pre">/tmp/bar</span></code></p>
<p>The shell would:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fork</span></code> a child process to execute the program <code class="docutils literal notranslate"><span class="pre">foo</span></code></p></li>
<li><p>In the child process:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">open</span></code> a file called <code class="docutils literal notranslate"><span class="pre">bar</span></code> in the directory <code class="docutils literal notranslate"><span class="pre">/tmp</span></code></p></li>
<li><p>use <code class="docutils literal notranslate"><span class="pre">dup2</span></code> to modify its <code class="docutils literal notranslate"><span class="pre">stdout</span></code> to use the file descriptor returned by the open</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exec</span></code> the program <code class="docutils literal notranslate"><span class="pre">foo</span></code></p></li>
</ol>
</li>
</ol>
<p>Great, now we know how to write a shell that can start a process that writes data into a file or reads data from a file specified by the user.  How do we get programs to talk to each other without staging it through a file?</p>
</section>
<section id="pipes">
<span id="cont-gs-abstractions-pipes"></span><h2><span class="section-number">4.5. </span>Pipes<a class="headerlink" href="#pipes" title="Link to this heading">#</a></h2>
<p>A <em>pipe</em> is a Unix kernel abstraction to allow communication between processes. A <code class="docutils literal notranslate"><span class="pre">read</span></code> of the pipe will return data previously written to it in a first-in-first-out (FIFO) fashion. Pipes are unidirectional communication channels represented by a pair of file descriptors – data can only be written into one end of the pipe, and read out of the other end. A programmer can create a pipe, and then use operations that change the entries in the file descriptor table to tie the output of one program to the input of another.</p>
<p>A pipe is created with the following system call:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">err</span> <span class="pre">=</span> <span class="pre">pipe(&amp;fdpair[0])</span></code>: creates a pipe where <code class="docutils literal notranslate"><span class="pre">fdpair</span></code> is an array of two file descriptors returned by the kernel.</p></li>
</ul>
<p>After this call, <code class="docutils literal notranslate"><span class="pre">fdpair[0]</span></code> will have the descriptor for the entry in the file descriptor table for the  read end of the pipe, and <code class="docutils literal notranslate"><span class="pre">fdpair[1]</span></code> will  refer to the   write end of the pipe.  Data written to the write end of the pipe  is  buffered by  the  kernel  until it is read from the read end of the pipe.  A read from an empty pipe will block until there is some data in it, and will then return the max of the buffered data and the request size of the read.</p>
<p>To see how this is used, look at the following code (stolen from the Linux <code class="docutils literal notranslate"><span class="pre">man</span></code> page for <code class="docutils literal notranslate"><span class="pre">pipe</span></code>) in <a class="reference internal" href="#pipe-listing"><span class="std std-numref">Listing 4.3</span></a>:</p>
<div class="literal-block-wrapper docutils container" id="pipe-listing">
<div class="code-block-caption"><span class="caption-number">Listing 4.3 </span><span class="caption-text">pipe.c - A simple program that sends its argument through a pipe.</span><a class="headerlink" href="#pipe-listing" title="Link to this code">#</a></div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c1">#include &lt;sys/types.h&gt;</span>
<span class="linenos"> 2</span><span class="c1">#include &lt;sys/wait.h&gt;</span>
<span class="linenos"> 3</span><span class="c1">#include &lt;stdio.h&gt;</span>
<span class="linenos"> 4</span><span class="c1">#include &lt;stdlib.h&gt;</span>
<span class="linenos"> 5</span><span class="c1">#include &lt;unistd.h&gt;</span>
<span class="linenos"> 6</span><span class="c1">#include &lt;string.h&gt;</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="nb">int</span>
<span class="linenos"> 9</span><span class="n">main</span><span class="p">(</span><span class="nb">int</span> <span class="n">argc</span><span class="p">,</span> <span class="n">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="linenos">10</span><span class="p">{</span>
<span class="linenos">11</span>  <span class="nb">int</span> <span class="n">pipefd</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
<span class="linenos">12</span>  <span class="n">pid_t</span> <span class="n">cpid</span><span class="p">;</span>
<span class="linenos">13</span>  <span class="n">char</span> <span class="n">buf</span><span class="p">;</span>
<span class="linenos">14</span>  
<span class="linenos">15</span>  <span class="k">if</span> <span class="p">(</span><span class="n">argc</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">16</span>    <span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span> <span class="s2">&quot;Usage: </span><span class="si">%s</span><span class="s2"> &lt;string&gt;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="linenos">17</span>    <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
<span class="linenos">18</span>  <span class="p">}</span>
<span class="linenos">19</span>  
<span class="hll"><span class="linenos">20</span>  <span class="k">if</span> <span class="p">(</span><span class="n">pipe</span><span class="p">(</span><span class="n">pipefd</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span><span class="linenos">21</span>    <span class="n">perror</span><span class="p">(</span><span class="s2">&quot;pipe&quot;</span><span class="p">);</span>
<span class="linenos">22</span>    <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
<span class="linenos">23</span>  <span class="p">}</span>
<span class="linenos">24</span>  
<span class="linenos">25</span>  <span class="n">cpid</span> <span class="o">=</span> <span class="n">fork</span><span class="p">();</span>
<span class="linenos">26</span>  <span class="k">if</span> <span class="p">(</span><span class="n">cpid</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
<span class="linenos">27</span>    <span class="n">perror</span><span class="p">(</span><span class="s2">&quot;fork&quot;</span><span class="p">);</span>
<span class="linenos">28</span>    <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_FAILURE</span><span class="p">);</span>
<span class="linenos">29</span>  <span class="p">}</span>
<span class="linenos">30</span>  
<span class="linenos">31</span>  <span class="k">if</span> <span class="p">(</span><span class="n">cpid</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>    <span class="o">/*</span> <span class="n">Child</span> <span class="n">reads</span> <span class="kn">from</span> <span class="nn">pipe</span> <span class="o">*/</span>
<span class="linenos">32</span>    <span class="o">//</span> <span class="n">close</span><span class="p">(</span><span class="n">pipefd</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>          <span class="o">/*</span> <span class="n">Close</span> <span class="n">unused</span> <span class="n">write</span> <span class="n">end</span> <span class="o">*/</span>
<span class="linenos">33</span>    
<span class="hll"><span class="linenos">34</span>    <span class="k">while</span> <span class="p">(</span><span class="n">read</span><span class="p">(</span><span class="n">pipefd</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">&amp;</span><span class="n">buf</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
</span><span class="hll"><span class="linenos">35</span>      <span class="n">write</span><span class="p">(</span><span class="n">STDOUT_FILENO</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buf</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
</span><span class="linenos">36</span>    
<span class="linenos">37</span>    <span class="n">write</span><span class="p">(</span><span class="n">STDOUT_FILENO</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
<span class="linenos">38</span>    <span class="n">close</span><span class="p">(</span><span class="n">pipefd</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="linenos">39</span>    <span class="n">_exit</span><span class="p">(</span><span class="n">EXIT_SUCCESS</span><span class="p">);</span>
<span class="linenos">40</span>    
<span class="linenos">41</span>  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>            <span class="o">/*</span> <span class="n">Parent</span> <span class="n">writes</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">to</span> <span class="n">pipe</span> <span class="o">*/</span>
<span class="linenos">42</span>    <span class="n">close</span><span class="p">(</span><span class="n">pipefd</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>          <span class="o">/*</span> <span class="n">Close</span> <span class="n">unused</span> <span class="n">read</span> <span class="n">end</span> <span class="o">*/</span>
<span class="hll"><span class="linenos">43</span>    <span class="n">write</span><span class="p">(</span><span class="n">pipefd</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">strlen</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]));</span>
</span><span class="linenos">44</span>    <span class="n">close</span><span class="p">(</span><span class="n">pipefd</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>          <span class="o">/*</span> <span class="n">Reader</span> <span class="n">will</span> <span class="n">see</span> <span class="n">EOF</span> <span class="o">*/</span>
<span class="linenos">45</span>    <span class="n">wait</span><span class="p">(</span><span class="n">NULL</span><span class="p">);</span>                <span class="o">/*</span> <span class="n">Wait</span> <span class="k">for</span> <span class="n">child</span> <span class="o">*/</span>
<span class="linenos">46</span>    <span class="n">exit</span><span class="p">(</span><span class="n">EXIT_SUCCESS</span><span class="p">);</span>
<span class="linenos">47</span>  <span class="p">}</span>
<span class="linenos">48</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>The child code just sits in a loop reading from the pipe and then writing to <code class="docutils literal notranslate"><span class="pre">stdout</span></code> (lines 34-35).  The parent just writes its first argument (<code class="docutils literal notranslate"><span class="pre">argv[1]</span></code>) to the write side of the pipe (line 43).</p>
<p>Note, on line 32 and line 42, we see that each process closes the side of the pipe they are not using.  This is important, since, as mentioned above, the reference counts for all the file descriptors  are increased on a fork, so, after the fork both the parent and the child have both the read and write side of the pipe open. The only reason that the child process eventually gets a 0 result on a read (rather than blocking) is because all the references to the write side are closed after the parent executes line 44.</p>
<p>So, imagine we have the following shell script:</p>
<p><code class="docutils literal notranslate"> <span class="pre">foo</span> <span class="pre">|</span> <span class="pre">bar</span></code></p>
<p>The shell would:</p>
<ol class="arabic simple">
<li><p>create a pipe</p></li>
<li><p>fork a process to execute foo, but before doing the <code class="docutils literal notranslate"><span class="pre">exec</span></code> the process should use <code class="docutils literal notranslate"><span class="pre">dup2</span></code> to modify its <code class="docutils literal notranslate"><span class="pre">stdout</span></code> to be the write side of the pipe</p></li>
<li><p>fork a process to execute bar, and that child should use <code class="docutils literal notranslate"><span class="pre">dup2</span></code> to modify its <code class="docutils literal notranslate"><span class="pre">stdin</span></code> to the read side of the pipe before doing the <code class="docutils literal notranslate"><span class="pre">exec</span></code>.</p></li>
</ol>
<p>Now we can start two processes, executing different programs, that talk directly to each other through a pipe.  These programs don’t care that they are talking to each other, they work exactly the same way if they are talking to a terminal, a file or a pipe.  Now we have all the pieces to write a shell that can compose different programs to, for example, tell me how many programs in <code class="docutils literal notranslate"><span class="pre">/usr/bin</span></code> have something to do with <code class="docutils literal notranslate"><span class="pre">perl</span></code>:</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "742ddbadaa2f4533b05c622dbcca3754", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
<section id="signals-protecting-against-dreaded-zombies">
<span id="cont-gs-abstractions-signals"></span><h2><span class="section-number">4.6. </span>Signals protecting against dreaded zombies<a class="headerlink" href="#signals-protecting-against-dreaded-zombies" title="Link to this heading">#</a></h2>
<p>When we talked about processes, we wrote a well-behaved shell that started another process using <code class="docutils literal notranslate"><span class="pre">fork</span></code> and then waited for it to finish.  What would happen if we didn’t wait?  Both the shell and the program it started would run at the same time, or at least as we will talk about <a class="reference internal" href="../scheduling/intro.html#cont-vp"><span class="std std-ref">later</span></a>, the kernel causes the hardware to take turns running one and then the other. This is exactly what the symbol <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> does, i.e., tells the shell to let the program run in parallel.  As an example, if I am building something complicated, I will often do it in parallel while continuing to work on my shell, e.g., the following command runs make, redirecting all its output into the file RES, and then returns control to the user.  You can every so often look at RES to see if the make is done.</p>
<div class="cell tag_output_scroll tag_remove-input docutils container">
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "932d20cb2f934e8e87c871901a0ed7ca", "version_major": 2, "version_minor": 0}</script></div>
</div>
<p>While this is great for the user who can now use the shell to run multiple programs concurrently, there is a problem.  If the child finishes, it will exit with its status, but it will become a zombie if the shell never waits for it.  After a while, the system will be filled with zombies and come to a grinding halt.</p>
<p>The way Unix deals with this is by sending a signal to a parent process when a child finishes.  A signal is, for a virtual computer, similar to what an interrupt is for a physical computer.  It tells it that some event happened on the outside world that it might want to know about.</p>
<p>There are a large number of signals the system can tell you about, and you can find out more about all of them with <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">7</span> <span class="pre">signal</span></code>.  In this case, the shell should register a signal handler for the <code class="docutils literal notranslate"><span class="pre">SIGCHLD</span></code> signal using the <code class="docutils literal notranslate"><span class="pre">sigaction</span></code> system call.</p>
<ul class="simple">
<li><p>sigaction(signum, act, &amp;oldact);</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">act</span></code> points to a data structure <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">sigaction</span></code> that describes how the caller wants to handle the signal, including a pointer to a function that will be called when the signal <code class="docutils literal notranslate"><span class="pre">signum</span></code> is delivered to the process.  If there was previously a handler registered, the <code class="docutils literal notranslate"><span class="pre">oldact</span></code> tells the caller what the old action was. This allows the shell to <code class="docutils literal notranslate"><span class="pre">wait</span></code> for zombie children in the signal handler function when it receives notification that a child process has exited.</p>
</section>
<section id="conclusion">
<h2><span class="section-number">4.7. </span>Conclusion<a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h2>
<p>This chapter has given you a whirlwind tour of some of the key abstractions of Unix. A process is a virtual computer, with its own virtual CPU and virtual memory.   You should know how to create a new process, and tell it to execute a program.</p>
<p>The power of Unix is the idea that we can combine many programs together, using a shell, where the input and output of processes can be set up to be the terminal, files, or pipes.  You should have an idea now on some of the key system calls that enable a shell to do this.  Later chapters will discuss in much more detail the abstraction of a CPU and how it is scheduled, how memory management works and the system calls you can use to control it, and how file systems work and their system calls.</p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./intro"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="structure.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">3. </span>Operating System Structure &amp; Unix/Linux</p>
      </div>
    </a>
    <a class="right-next"
       href="tools.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">5. </span>What you should know</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#everything-is-a-file">4.1. Everything is a file</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#process-management">4.2. Process management</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#state">4.2.1. State</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#system-calls">4.2.2. System calls</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#examples">4.2.3. Examples</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">4.2.4. Summary</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#file-system">4.3. File system</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#changing-stdin-and-stdout">4.4. Changing stdin and stdout</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#pipes">4.5. Pipes</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#signals-protecting-against-dreaded-zombies">4.6. Signals protecting against dreaded zombies</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion">4.7. Conclusion</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By (see contributing chapter book)
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>